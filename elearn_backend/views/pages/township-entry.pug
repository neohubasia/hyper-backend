extends ../includes/layout-main
block content
  main.ml-sm-auto.px-md-4(role='main')

    include ./../includes/layout-entry-header

    include ./../includes/layout-entry-form
      block inputs

        div.form-group.row
          div.col-sm-6
            label.control-label(for='township_mm') Township (MM)
            input.form-control.input-sm#township_mm(type='text', name='township_mm', value=data.township_mm, maxlength="55" autocomplete="off" required autofocus)
          div.col-sm-6
            label.control-label(for='township_en') Township (EN)
            input.form-control.input-sm#township_en(type='text', name='township_en' value=data.township_en maxlength="55" autocomplete="off")

        div.form-group.row
          div.col-sm-12
            - var cityid =  data.cityid || "#";
            label.control-label(for='city') City
            select.form-control.input-sm.selectpicker#cityid(name='cityid' value=cityid._id data-value=cityid._id, data-live-search="true", data-size="8" required)

        div.form-group.row
          div.col-sm-6
            label.control-label(for='code') Code
            input.form-control.input-sm#code(type='text', name='code', value=data.code, maxlength="55" autocomplete="off" )
          div.col-sm-6
            label.control-label(for='description') Description
            input.form-control.input-sm#description(type='text', name='description', value=data.description autocomplete="off")

        include ./../includes/layout-entry-btn

    form#postSuccessForm(method='GET', action=page.list.url)
  script.
    $(document).ready(function() {
      var token = '!{token}';
      $('#alert').hide();

      var status = "!{data.active}";
      if (status && status == "false")
        $('#statusInactive').attr("checked", "checked");

    
      $('#entryForm').submit(function (e) {
        e.preventDefault();
        $.ajax({
          url: $(this).attr('action'),
          type:$(this).attr('method'),
          data: $(this).serialize(),
          success: function (data) {
            handleAlert(data);
          },
          error: function (data) {
            console.log('An error occurred.');
            console.log(data);
          },
        });
      });

      ajaxLoadOption({
        type: "GET",
        url:"/api/cities",
        selectId: "#cityid",
        showKey: "city_mm",
        filterObj: {},
        token: token
      });

    });