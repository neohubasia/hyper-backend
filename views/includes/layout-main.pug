doctype html
head
  meta(charset='utf-8')
  meta(name='description' content='')
  meta(name='author' content='Wai Phyo')
  meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
  link(rel="shortcut icon" type="image/png" href="/images/auth/it-logo-transparent.png")

  title !{app.NAME}

  // Dashboard CSS
  link(href='https://getbootstrap.com/docs/4.5/examples/dashboard/' rel='canonical')

  // Bootstrap Core CSS
  link(href='/assets/dist/css/bootstrap.min.css' rel='stylesheet')

  // Data Table CSS
  link(href="/layout-css/lib/data-table/jquery.dataTables.min.css" rel="stylesheet")

  // Layout/Lib
  link(href='/layout-css/lib/select2/select2.min.css' rel='stylesheet')
  link(href='/layout-css/lib/sweetalert2/sweetalert2.min.css' rel='stylesheet')

  // Layout CSS
  link(href='/layout-css/dashboard.css' rel='stylesheet')
  link(href='/layout-css/general.min.css' rel='stylesheet')

  // Font Awesome
  link(href="/layout-css/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous")

  // Font Feather
  script(src='/layout-js/lib/feather/feather.min.js')

  // Jquery Core
  script(src="/layout-js/lib/jquery.min.js")

#wrapper.d-flex
  include layout-sidebar
  #page-content-wrapper
    include layout-navbar
    .container-fluid
      block content

<!-- Layout JS/ Lib -->
script(src='/layout-js/lib/moment/moment.js')
script(src='/layout-js/lib/select2/select2.full.min.js')
script(src='/layout-js/lib/sweetalert2/sweetalert2.min.js')


script(src='/assets/dist/js/bootstrap.bundle.min.js')
script(src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js')

<!-- Data Table JS -->
script(src="/layout-js/lib/data-table/jquery.dataTables.min.js")

<!-- Datetime JS -->
script(src="/layout-js/lib/datepicker/bootstrap-datepicker.min.js")

<!-- Layout JS -->
script(src='/layout-js/dashboard.js')  <!-- to fix later ...  -->
script(src='/layout-js/common.js')

// Menu Toggle Script
script.
  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("toggled");
  });

  const req = new XMLHttpRequest();
  req.open("GET", "http://localhost:7878/getuser", true);
  req.send();
  req.onreadystatechange = function () {
    console.log("Req ", req);
    if (req.readyState == 4 && req.status == 200) {
      const user = JSON.parse(req.response).user;
      document.getElementById("username").innerText = ` ${user.username}`;
    }
  };